<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Heart Disease Predictor</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
    <div class="home-page">
        <div class="background"></div>
        <div class="input-container">
            <form id="predictionForm" class="form-box">
                <h2 class="form-title">Heart Disease Prediction Form</h2>
                <div class="input-group">
                    <input type="number" name="Age" placeholder="Age" class="input-field" required>
                </div>
                <div class="input-group">
                    <p class="input-label">Gender</p>
                    <div class="radio-group">
                        <input type="radio" name="Gender" value="1" id="male" required>
                        <label for="male">Male</label>
                        <input type="radio" name="Gender" value="0" id="female">
                        <label for="female">Female</label>
                    </div>
                </div>
                <div class="input-group">
                    <p class="input-label">Diabetes</p>
                    <div class="radio-group">
                        <input type="radio" name="Diabetes" value="1" id="diab-yes">
                        <label for="diab-yes">Yes</label>
                        <input type="radio" name="Diabetes" value="0" id="diab-no">
                        <label for="diab-no">No</label>
                    </div>
                </div>
                <div class="input-group">
                    <p class="input-label">Health Insurance</p>
                    <div class="radio-group">
                        <input type="radio" name="Health-Insurance" value="1" id="hi-yes">
                        <label for="hi-yes">Yes</label>
                        <input type="radio" name="Health-Insurance" value="0" id="hi-no">
                        <label for="hi-no">No</label>
                    </div>
                </div>
                <div class="input-group">
                    <p class="input-label">Blood Relative had Stroke?</p>
                    <div class="radio-group">
                        <input type="radio" name="Blood-Rel-Stroke" value="1" id="brs-yes">
                        <label for="brs-yes">Yes</label>
                        <input type="radio" name="Blood-Rel-Stroke" value="0" id="brs-no">
                        <label for="brs-no">No</label>
                    </div>
                </div>
                <div class="input-group">
                    <p class="input-label">Vigorous Work</p>
                    <div class="radio-group">
                        <input type="radio" name="Vigorous-work" value="1" id="vig-yes">
                        <label for="vig-yes">Yes</label>
                        <input type="radio" name="Vigorous-work" value="0" id="vig-no">
                        <label for="vig-no">No</label>
                    </div>
                </div>
                <div class="input-group">
                    <p class="input-label">Moderate Work</p>
                    <div class="radio-group">
                        <input type="radio" name="Moderate-work" value="1" id="mod-yes">
                        <label for="mod-yes">Yes</label>
                        <input type="radio" name="Moderate-work" value="0" id="mod-no">
                        <label for="mod-no">No</label>
                    </div>
                </div>
                <div class="grid-container">
                    <input type="number" name="Annual-Family-Income" placeholder="Annual Family Income"
                        class="input-field" required>
                    <input type="number" step="0.01" name="Uric.Acid" placeholder="Uric Acid" class="input-field"
                        required>
                    <input type="number" name="Blood-Rel-Diabetes" placeholder="Blood Rel Diabetes (1/0)"
                        class="input-field" required>
                    <input type="number" name="Glucose" placeholder="Glucose" class="input-field" required>
                    <input type="number" step="0.01" name="Creatinine" placeholder="Creatinine" class="input-field"
                        required>
                    <input type="number" name="Total-Cholesterol" placeholder="Total Cholesterol" class="input-field"
                        required>
                    <input type="number" step="0.1" name="Glycohemoglobin" placeholder="Glycohemoglobin"
                        class="input-field" required>
                    <input type="number" name="Lymphocyte" placeholder="Lymphocyte" class="input-field" required>
                    <input type="number" name="Platelet-count" placeholder="Platelet Count" class="input-field"
                        required>
                    <input type="number" name="Cholesterol" placeholder="Cholesterol" class="input-field" required>
                    <input type="number" name="Red-Cell-Distribution-Width" placeholder="Red Cell Distribution Width"
                        class="input-field" required>
                    <input type="number" name="X60-sec-pulse" placeholder="60-sec Pulse" class="input-field" required>
                    <input type="number" name="High-Density Lipoprotein" placeholder="HDL" class="input-field" required>
                    <input type="number" name="Diastolic" placeholder="Diastolic" class="input-field" required>
                    <input type="number" name="Systolic" placeholder="Systolic" class="input-field" required>
                    <input type="number" name="Monocyte" placeholder="Monocyte" class="input-field" required>
                    <input type="number" name="Eosinophils" placeholder="Eosinophils" class="input-field" required>
                </div>
                <input type="submit" value="Submit" class="submit-btn">
            </form>
            <div id="result" class="result-box"></div>
        </div>
    </div>
    <script>
        $("#predictionForm").on("submit", function (e) {
            e.preventDefault();
            console.log("Started CardioSense....")
            const formData = {};
            $(this).serializeArray().forEach(item => {
                formData[item.name] = isNaN(item.value) ? item.value : parseFloat(item.value);
            });
            $("#result").hide().removeClass("show").html("");
            $.ajax({
                url: "http://127.0.0.1:5000/predict",
                method: "POST",
                contentType: "application/json",
                data: JSON.stringify(formData),
                success: function (response) {
                    console.log(response);
                    $("#result")
                        .html(`<p>Prediction: <strong>${response.HeartDisease_Prediction === 1 ? "Heart Disease Detected" : "No Heart Disease"}</strong></p>`)
                        .addClass("show") 
                        .fadeIn(500); 
                },
                error: function (xhr) {
                    $("#result")
                    .html(`<p class="error">Error: ${xhr.responseJSON?.error || "Something went wrong."}</p>`)
                    .addClass("show")
                    .fadeIn(500)

                }
            });
        });
    </script>
</body>

</html>